<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>public/js/modules/bunker-management.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Dark theme matching app style - carefully scoped to not break layout */
        html, body {
            background-color: #1a1a1a !important;
            color: #e0e0e0 !important;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
            overflow-x: hidden !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        /* Custom scrollbar styling for all browsers */
        * {
            scrollbar-width: thin !important;
            scrollbar-color: #404040 #1a1a1a !important;
        }

        /* Webkit browsers (Chrome, Safari, Edge) */
        *::-webkit-scrollbar {
            width: 6px !important;
            height: 6px !important;
        }

        *::-webkit-scrollbar-track {
            background: #1a1a1a !important;
        }

        *::-webkit-scrollbar-thumb {
            background-color: #404040 !important;
            border-radius: 3px !important;
        }

        *::-webkit-scrollbar-thumb:hover {
            background-color: #505050 !important;
        }

        /* Navigation sidebar - remove padding and white borders */
        nav {
            background-color: #242424 !important;
            border-right: 1px solid #404040 !important;
            padding: 0 !important;
            margin: 0 !important;
            overflow-x: hidden !important;
        }
        nav h2, nav h3 {
            color: #e0e0e0 !important;
            border-bottom: 1px solid #404040 !important;
            padding: 10px 15px !important;
            margin: 0 !important;
            background-color: #242424 !important;
            font-size: 14px !important;
            font-weight: 600 !important;
        }
        nav h3 {
            font-size: 13px !important;
        }
        nav ul {
            padding: 0 !important;
            margin: 0 !important;
            background-color: #242424 !important;
        }
        nav ul li {
            list-style: none !important;
            margin: 0 !important;
            padding: 0 !important;
            background-color: #242424 !important;
        }
        nav ul li a {
            color: #c9d1d9 !important;
            display: block !important;
            padding: 8px 15px !important;
            white-space: nowrap !important;
            overflow: hidden !important;
            text-overflow: ellipsis !important;
            background-color: #242424 !important;
            margin: 0 !important;
            border: none !important;
            font-size: 14px !important;
        }
        nav ul li a:hover {
            color: #60a5fa !important;
            background-color: rgba(96, 165, 250, 0.1) !important;
        }
        /* Module links (direct children of nav > ul > li) */
        nav > ul > li > a {
            color: #60a5fa !important;
            font-weight: 600 !important;
            padding: 10px 15px !important;
            font-size: 14px !important;
            border-left: 3px solid #60a5fa !important;
            padding-left: 12px !important;
        }
        nav > ul > li > a:hover {
            background-color: rgba(96, 165, 250, 0.15) !important;
        }
        /* Sub-items (methods/functions) indented */
        nav ul.methods {
            padding-left: 15px !important;
        }
        nav ul.methods li a {
            color: #9ca3af !important;
            font-size: 13px !important;
            padding: 6px 15px !important;
            font-weight: 400 !important;
        }
        nav ul.methods li a:hover {
            color: #c9d1d9 !important;
        }
        nav > h2:first-child {
            font-size: 16px !important;
            font-weight: 700 !important;
            padding: 12px 15px !important;
        }

        /* Main content area - dark background */
        #main {
            background-color: #1a1a1a !important;
            padding: 20px !important;
        }

        /* Article and sections - ensure dark background */
        article, section, .container-overview, .description {
            background-color: #1a1a1a !important;
        }

        /* Images - style demo images */
        img {
            max-width: 100% !important;
            height: auto !important;
            border: 1px solid #404040 !important;
            border-radius: 8px !important;
            margin: 20px 0 !important;
        }

        /* Links */
        a {
            color: #60a5fa !important;
            text-decoration: none !important;
        }
        a:hover {
            color: #93c5fd !important;
            text-decoration: underline !important;
        }

        /* Headings */
        h1, h2, h3, h4, h5, h6 {
            color: #e0e0e0 !important;
            border-bottom-color: #404040 !important;
            background-color: transparent !important;
        }
        h4.name {
            background-color: #2a2a2a !important;
            border: 1px solid #404040 !important;
        }

        /* Code blocks */
        pre {
            background-color: #0d1117 !important;
            border: 1px solid #404040 !important;
        }
        pre code {
            background-color: transparent !important;
        }
        code {
            background-color: #2a2a2a !important;
            color: #e0e0e0 !important;
            padding: 2px 6px !important;
            border-radius: 3px !important;
        }

        /* Tables */
        table {
            border-color: #404040 !important;
            background-color: #1a1a1a !important;
        }
        table thead tr {
            background-color: #242424 !important;
        }
        table tbody tr {
            background-color: #1a1a1a !important;
        }
        table tbody tr:nth-child(even) {
            background-color: #1f1f1f !important;
        }
        table td, table th {
            border-color: #404040 !important;
            color: #e0e0e0 !important;
            background-color: transparent !important;
        }
        .params .name, .props .name {
            color: #10b981 !important;
            font-family: 'Courier New', monospace !important;
        }

        /* Descriptions and details */
        .description, .details, dt, dd, p, ul, ol, dl {
            color: #e0e0e0 !important;
            background-color: transparent !important;
        }

        /* Types */
        .type-signature {
            color: #a78bfa !important;
        }

        /* Source links */
        .details .details-item-container {
            border-left-color: #404040 !important;
        }

        /* Breadcrumbs */
        .page-title {
            color: #e0e0e0 !important;
        }

        /* Search */
        #nav-search {
            background-color: #2a2a2a !important;
            border: 1px solid #404040 !important;
            color: #e0e0e0 !important;
        }

        /* Mobile nav trigger */
        .navicon-button {
            background-color: #2a2a2a !important;
        }

        /* Footer */
        footer {
            background-color: #1a1a1a !important;
            color: #9ca3af !important;
            border-top: 1px solid #404040 !important;
            text-align: center !important;
            padding: 20px !important;
        }

        /* Remove horizontal scrollbar and white borders */
        * {
            box-sizing: border-box !important;
        }
    </style>
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">README</a></h2><h3>Tutorials</h3><ul><li><a href="tutorial-build-guide.html">Build Guide</a></li><li><a href="tutorial-installation-guide.html">Installation Guide</a></li></ul><h3>Classes</h3><ul><li><a href="module-server_chatbot-ChatBot.html">ChatBot</a><ul class='methods'><li data-type='method'><a href="module-server_chatbot-ChatBot.html#executeCommand">executeCommand</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#findCustomCommand">findCustomCommand</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#generateForecastText">generateForecastText</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#getDefaultChatBotObject">getDefaultChatBotObject</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#handleForecastCommand">handleForecastCommand</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#handleHelpCommand">handleHelpCommand</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#initialize">initialize</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#isCommandAllowedInChannel">isCommandAllowedInChannel</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#isOnCooldown">isOnCooldown</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#loadSettings">loadSettings</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#mapChatBotObjectToFlatSettings">mapChatBotObjectToFlatSettings</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#mapSettingsToChatBotObject">mapSettingsToChatBotObject</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#processAllianceMessage">processAllianceMessage</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#processPrivateMessage">processPrivateMessage</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#resolveCommandName">resolveCommandName</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#scheduleDailyForecast">scheduleDailyForecast</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#sendAllianceMessage">sendAllianceMessage</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#sendDailyForecast">sendDailyForecast</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#sendErrorMessage">sendErrorMessage</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#sendPrivateMessage">sendPrivateMessage</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#sendResponse">sendResponse</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#setupScheduledTasks">setupScheduledTasks</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#updateCooldown">updateCooldown</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#updateSettings">updateSettings</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#validateCommandArguments">validateCommandArguments</a></li><li data-type='method'><a href="module-server_chatbot-ChatBot.html#validateForecastArguments">validateForecastArguments</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-api.html">api</a><ul class='methods'><li data-type='method'><a href="module-api.html#.activateCampaign">activateCampaign</a></li><li data-type='method'><a href="module-api.html#.deleteAllLogs">deleteAllLogs</a></li><li data-type='method'><a href="module-api.html#.deleteChat">deleteChat</a></li><li data-type='method'><a href="module-api.html#.departAllVessels">departAllVessels</a></li><li data-type='method'><a href="module-api.html#.departVessel">departVessel</a></li><li data-type='method'><a href="module-api.html#.departVessels">departVessels</a></li><li data-type='method'><a href="module-api.html#.doWearMaintenanceBulk">doWearMaintenanceBulk</a></li><li data-type='method'><a href="module-api.html#.downloadLogbookExport">downloadLogbookExport</a></li><li data-type='method'><a href="module-api.html#.fetchAcquirableVessels">fetchAcquirableVessels</a></li><li data-type='method'><a href="module-api.html#.fetchAllianceMembers">fetchAllianceMembers</a></li><li data-type='method'><a href="module-api.html#.fetchAssignedPorts">fetchAssignedPorts</a></li><li data-type='method'><a href="module-api.html#.fetchBunkerPrices">fetchBunkerPrices</a></li><li data-type='method'><a href="module-api.html#.fetchCampaigns">fetchCampaigns</a></li><li data-type='method'><a href="module-api.html#.fetchChat">fetchChat</a></li><li data-type='method'><a href="module-api.html#.fetchContacts">fetchContacts</a></li><li data-type='method'><a href="module-api.html#.fetchLogbookEntries">fetchLogbookEntries</a></li><li data-type='method'><a href="module-api.html#.fetchLogbookFileSize">fetchLogbookFileSize</a></li><li data-type='method'><a href="module-api.html#.fetchMessengerChats">fetchMessengerChats</a></li><li data-type='method'><a href="module-api.html#.fetchMessengerMessages">fetchMessengerMessages</a></li><li data-type='method'><a href="module-api.html#.fetchUserCompany">fetchUserCompany</a></li><li data-type='method'><a href="module-api.html#.fetchUserSettings">fetchUserSettings</a></li><li data-type='method'><a href="module-api.html#.fetchVessels">fetchVessels</a></li><li data-type='method'><a href="module-api.html#.getCompanyNameCached">getCompanyNameCached</a></li><li data-type='method'><a href="module-api.html#.getMaintenanceCost">getMaintenanceCost</a></li><li data-type='method'><a href="module-api.html#.markChatAsRead">markChatAsRead</a></li><li data-type='method'><a href="module-api.html#.purchaseCO2">purchaseCO2</a></li><li data-type='method'><a href="module-api.html#.purchaseFuel">purchaseFuel</a></li><li data-type='method'><a href="module-api.html#.purchaseVessel">purchaseVessel</a></li><li data-type='method'><a href="module-api.html#.searchUsers">searchUsers</a></li><li data-type='method'><a href="module-api.html#.sendChatMessage">sendChatMessage</a></li><li data-type='method'><a href="module-api.html#.sendPrivateMessage">sendPrivateMessage</a></li></ul></li><li><a href="module-app.html">app</a></li><li><a href="module-automation.html">automation</a><ul class='methods'><li data-type='method'><a href="module-automation.html#.initAutomation">initAutomation</a></li><li data-type='method'><a href="module-automation.html#.runAutomationChecks">runAutomationChecks</a></li><li data-type='method'><a href="module-automation.html#.triggerAutoRebuyChecks">triggerAutoRebuyChecks</a></li><li data-type='method'><a href="module-automation.html#~calculateRemainingDemand">calculateRemainingDemand</a></li><li data-type='method'><a href="module-automation.html#~checkAutoCampaignRenewal">checkAutoCampaignRenewal</a></li><li data-type='method'><a href="module-automation.html#~checkAutoDepartAll">checkAutoDepartAll</a></li><li data-type='method'><a href="module-automation.html#~checkAutoRebuyCO2">checkAutoRebuyCO2</a></li><li data-type='method'><a href="module-automation.html#~checkAutoRebuyFuel">checkAutoRebuyFuel</a></li><li data-type='method'><a href="module-automation.html#~getTotalCapacity">getTotalCapacity</a></li><li data-type='method'><a href="module-automation.html#~performAutoRebuyCO2">performAutoRebuyCO2</a></li><li data-type='method'><a href="module-automation.html#~performAutoRebuyFuel">performAutoRebuyFuel</a></li><li data-type='method'><a href="module-automation.html#~sendAutoPilotFeedback">sendAutoPilotFeedback</a></li><li data-type='method'><a href="module-automation.html#~showCenterAlert">showCenterAlert</a></li><li data-type='method'><a href="module-automation.html#~updateAutoDepartLabel">updateAutoDepartLabel</a></li></ul></li><li><a href="module-bunker-management.html">bunker-management</a><ul class='methods'><li data-type='method'><a href="module-bunker-management.html#.buyMaxCO2">buyMaxCO2</a></li><li data-type='method'><a href="module-bunker-management.html#.buyMaxFuel">buyMaxFuel</a></li><li data-type='method'><a href="module-bunker-management.html#.getCurrentBunkerState">getCurrentBunkerState</a></li><li data-type='method'><a href="module-bunker-management.html#.setCapacityFromBunkerUpdate">setCapacityFromBunkerUpdate</a></li><li data-type='method'><a href="module-bunker-management.html#.updateBunkerStatus">updateBunkerStatus</a></li><li data-type='method'><a href="module-bunker-management.html#.updateCampaignsStatus">updateCampaignsStatus</a></li><li data-type='method'><a href="module-bunker-management.html#.updateCurrentCO2">updateCurrentCO2</a></li><li data-type='method'><a href="module-bunker-management.html#.updateCurrentCash">updateCurrentCash</a></li><li data-type='method'><a href="module-bunker-management.html#.updateCurrentFuel">updateCurrentFuel</a></li><li data-type='method'><a href="module-bunker-management.html#~retryFetchPrices">retryFetchPrices</a></li></ul></li><li><a href="module-chat.html">chat</a><ul class='methods'><li data-type='method'><a href="module-chat.html#.displayMessages">displayMessages</a></li><li data-type='method'><a href="module-chat.html#.handleMessageInput">handleMessageInput</a></li><li data-type='method'><a href="module-chat.html#.initWebSocket">initWebSocket</a></li><li data-type='method'><a href="module-chat.html#.loadAllianceMembers">loadAllianceMembers</a></li><li data-type='method'><a href="module-chat.html#.loadMessages">loadMessages</a></li><li data-type='method'><a href="module-chat.html#.parseMessageWithMentions">parseMessageWithMentions</a></li><li data-type='method'><a href="module-chat.html#.sendMessage">sendMessage</a></li><li data-type='method'><a href="module-chat.html#.setChatScrollListener">setChatScrollListener</a></li><li data-type='method'><a href="module-chat.html#~attemptReconnect">attemptReconnect</a></li><li data-type='method'><a href="module-chat.html#~displaySuggestions">displaySuggestions</a></li><li data-type='method'><a href="module-chat.html#~formatLocalTime">formatLocalTime</a></li><li data-type='method'><a href="module-chat.html#~handleAutoCoopComplete">handleAutoCoopComplete</a></li><li data-type='method'><a href="module-chat.html#~handleAutoCoopNoTargets">handleAutoCoopNoTargets</a></li><li data-type='method'><a href="module-chat.html#~handleAutopilotDepartStart">handleAutopilotDepartStart</a></li><li data-type='method'><a href="module-chat.html#~handleBackendAutoRepairComplete">handleBackendAutoRepairComplete</a></li><li data-type='method'><a href="module-chat.html#~handleBunkerUpdate">handleBunkerUpdate</a></li><li data-type='method'><a href="module-chat.html#~handleCO2Purchased">handleCO2Purchased</a></li><li data-type='method'><a href="module-chat.html#~handleCampaignStatusUpdate">handleCampaignStatusUpdate</a></li><li data-type='method'><a href="module-chat.html#~handleCampaignsRenewed">handleCampaignsRenewed</a></li><li data-type='method'><a href="module-chat.html#~handleCompanyTypeUpdate">handleCompanyTypeUpdate</a></li><li data-type='method'><a href="module-chat.html#~handleCoopUpdate">handleCoopUpdate</a></li><li data-type='method'><a href="module-chat.html#~handleFuelPurchased">handleFuelPurchased</a></li><li data-type='method'><a href="module-chat.html#~handleGenericNotification">handleGenericNotification</a></li><li data-type='method'><a href="module-chat.html#~handleHeaderDataUpdate">handleHeaderDataUpdate</a></li><li data-type='method'><a href="module-chat.html#~handleHijackingUpdate">handleHijackingUpdate</a></li><li data-type='method'><a href="module-chat.html#~handleMentionAutocomplete">handleMentionAutocomplete</a></li><li data-type='method'><a href="module-chat.html#~handleMessengerUpdate">handleMessengerUpdate</a></li><li data-type='method'><a href="module-chat.html#~handlePriceAlert">handlePriceAlert</a></li><li data-type='method'><a href="module-chat.html#~handlePriceUpdate">handlePriceUpdate</a></li><li data-type='method'><a href="module-chat.html#~handleRepairCountUpdate">handleRepairCountUpdate</a></li><li data-type='method'><a href="module-chat.html#~handleUnreadMessagesUpdate">handleUnreadMessagesUpdate</a></li><li data-type='method'><a href="module-chat.html#~handleUserActionNotification">handleUserActionNotification</a></li><li data-type='method'><a href="module-chat.html#~handleVesselCountUpdate">handleVesselCountUpdate</a></li><li data-type='method'><a href="module-chat.html#~handleVesselsDepartComplete">handleVesselsDepartComplete</a></li><li data-type='method'><a href="module-chat.html#~handleVesselsDeparted">handleVesselsDeparted</a></li><li data-type='method'><a href="module-chat.html#~handleVesselsFailed">handleVesselsFailed</a></li><li data-type='method'><a href="module-chat.html#~handleVesselsRepaired">handleVesselsRepaired</a></li><li data-type='method'><a href="module-chat.html#~hideMemberSuggestions">hideMemberSuggestions</a></li><li data-type='method'><a href="module-chat.html#~insertMention">insertMention</a></li><li data-type='method'><a href="module-chat.html#~registerUsernameClickEvents">registerUsernameClickEvents</a></li></ul></li><li><a href="module-coop.html">coop</a><ul class='methods'><li data-type='method'><a href="module-coop.html#.closeCoopOverlay">closeCoopOverlay</a></li><li data-type='method'><a href="module-coop.html#.fetchCoopData">fetchCoopData</a></li><li data-type='method'><a href="module-coop.html#.sendCoopMax">sendCoopMax</a></li><li data-type='method'><a href="module-coop.html#.showCoopOverlay">showCoopOverlay</a></li><li data-type='method'><a href="module-coop.html#.updateCoopBadge">updateCoopBadge</a></li><li data-type='method'><a href="module-coop.html#~renderMemberCard">renderMemberCard</a></li></ul></li><li><a href="module-desktop-notification-templates.html">desktop-notification-templates</a><ul class='methods'><li data-type='method'><a href="module-desktop-notification-templates.html#.createDesktopNotification">createDesktopNotification</a></li><li data-type='method'><a href="module-desktop-notification-templates.html#.getDefaultEmoji">getDefaultEmoji</a></li><li data-type='method'><a href="module-desktop-notification-templates.html#.getNotificationTypes">getNotificationTypes</a></li><li data-type='method'><a href="module-desktop-notification-templates.html#.isValidNotificationType">isValidNotificationType</a></li><li data-type='method'><a href="module-desktop-notification-templates.html#.notifyAlert">notifyAlert</a></li><li data-type='method'><a href="module-desktop-notification-templates.html#.notifyError">notifyError</a></li><li data-type='method'><a href="module-desktop-notification-templates.html#.notifySuccess">notifySuccess</a></li><li data-type='method'><a href="module-desktop-notification-templates.html#.notifyWarning">notifyWarning</a></li></ul></li><li><a href="module-event-info.html">event-info</a><ul class='methods'><li data-type='method'><a href="module-event-info.html#.initEventInfo">initEventInfo</a></li><li data-type='method'><a href="module-event-info.html#.openEventModal">openEventModal</a></li><li data-type='method'><a href="module-event-info.html#.updateEventData">updateEventData</a></li><li data-type='method'><a href="module-event-info.html#~startEventTimer">startEventTimer</a></li></ul></li><li><a href="module-forecast-calendar.html">forecast-calendar</a><ul class='methods'><li data-type='method'><a href="module-forecast-calendar.html#.initForecastCalendar">initForecastCalendar</a></li><li data-type='method'><a href="module-forecast-calendar.html#.updateEventDiscount">updateEventDiscount</a></li><li data-type='method'><a href="module-forecast-calendar.html#~createTableHTML">createTableHTML</a></li><li data-type='method'><a href="module-forecast-calendar.html#~formatDate">formatDate</a></li><li data-type='method'><a href="module-forecast-calendar.html#~getBrowserTimezone">getBrowserTimezone</a></li><li data-type='method'><a href="module-forecast-calendar.html#~getCo2Class">getCo2Class</a></li><li data-type='method'><a href="module-forecast-calendar.html#~getCurrentVisibleDay">getCurrentVisibleDay</a></li><li data-type='method'><a href="module-forecast-calendar.html#~getFuelClass">getFuelClass</a></li><li data-type='method'><a href="module-forecast-calendar.html#~isEventActiveAtTime">isEventActiveAtTime</a></li><li data-type='method'><a href="module-forecast-calendar.html#~isEventActiveOnDay">isEventActiveOnDay</a></li><li data-type='method'><a href="module-forecast-calendar.html#~loadForecastData">loadForecastData</a></li><li data-type='method'><a href="module-forecast-calendar.html#~preloadMonth">preloadMonth</a></li><li data-type='method'><a href="module-forecast-calendar.html#~renderBook">renderBook</a></li><li data-type='method'><a href="module-forecast-calendar.html#~updateEventBadge">updateEventBadge</a></li></ul></li><li><a href="module-logbook.html">logbook</a><ul class='methods'><li data-type='method'><a href="module-logbook.html#.deleteAllLogsConfirmed">deleteAllLogsConfirmed</a></li><li data-type='method'><a href="module-logbook.html#.getLogFileSize">getLogFileSize</a></li><li data-type='method'><a href="module-logbook.html#.initLogbook">initLogbook</a></li><li data-type='method'><a href="module-logbook.html#.prependLogEntry">prependLogEntry</a></li><li data-type='method'><a href="module-logbook.html#~exportLogs">exportLogs</a></li><li data-type='method'><a href="module-logbook.html#~formatDetails">formatDetails</a></li><li data-type='method'><a href="module-logbook.html#~formatTimestamp">formatTimestamp</a></li><li data-type='method'><a href="module-logbook.html#~loadLogs">loadLogs</a></li><li data-type='method'><a href="module-logbook.html#~renderDetailsRow">renderDetailsRow</a></li><li data-type='method'><a href="module-logbook.html#~renderLogTable">renderLogTable</a></li><li data-type='method'><a href="module-logbook.html#~searchInObject">searchInObject</a></li><li data-type='method'><a href="module-logbook.html#~toggleExpanded">toggleExpanded</a></li><li data-type='method'><a href="module-logbook.html#~updateAutopilotFilter">updateAutopilotFilter</a></li></ul></li><li><a href="module-messenger.html">messenger</a><ul class='methods'><li data-type='method'><a href="module-messenger.html#.closeAllChats">closeAllChats</a></li><li data-type='method'><a href="module-messenger.html#.closeChatSelection">closeChatSelection</a></li><li data-type='method'><a href="module-messenger.html#.openMessenger">openMessenger</a></li><li data-type='method'><a href="module-messenger.html#.openNewChat">openNewChat</a></li><li data-type='method'><a href="module-messenger.html#.showAllChats">showAllChats</a></li><li data-type='method'><a href="module-messenger.html#.updateUnreadBadge">updateUnreadBadge</a></li><li data-type='method'><a href="module-messenger.html#~formatTimestamp">formatTimestamp</a></li><li data-type='method'><a href="module-messenger.html#~loadPrivateMessages">loadPrivateMessages</a></li><li data-type='method'><a href="module-messenger.html#~startHijackingPolling">startHijackingPolling</a></li><li data-type='method'><a href="module-messenger.html#~stopHijackingPolling">stopHijackingPolling</a></li></ul></li><li><a href="module-public_js_modules_hijacking.html">public/js/modules/hijacking</a><ul class='methods'><li data-type='method'><a href="module-public_js_modules_hijacking.html#.closeHijackingInbox">closeHijackingInbox</a></li><li data-type='method'><a href="module-public_js_modules_hijacking.html#.openHijackingInbox">openHijackingInbox</a></li><li data-type='method'><a href="module-public_js_modules_hijacking.html#.updateHijackedVesselsDisplay">updateHijackedVesselsDisplay</a></li><li data-type='method'><a href="module-public_js_modules_hijacking.html#.updateHijackingBadge">updateHijackingBadge</a></li><li data-type='method'><a href="module-public_js_modules_hijacking.html#~deleteCase">deleteCase</a></li><li data-type='method'><a href="module-public_js_modules_hijacking.html#~escapeHtml">escapeHtml</a></li><li data-type='method'><a href="module-public_js_modules_hijacking.html#~formatTimestamp">formatTimestamp</a></li><li data-type='method'><a href="module-public_js_modules_hijacking.html#~openCaseDetails">openCaseDetails</a></li><li data-type='method'><a href="module-public_js_modules_hijacking.html#~refreshHijackingBadge">refreshHijackingBadge</a></li><li data-type='method'><a href="module-public_js_modules_hijacking.html#~renderCaseList">renderCaseList</a></li></ul></li><li><a href="module-server_automation.html">server/automation</a><ul class='methods'><li data-type='method'><a href="module-server_automation.html#~getRandomInterval">getRandomInterval</a></li><li data-type='method'><a href="module-server_automation.html#~initialize">initialize</a></li><li data-type='method'><a href="module-server_automation.html#~loadSettings">loadSettings</a></li><li data-type='method'><a href="module-server_automation.html#~parseInterval">parseInterval</a></li><li data-type='method'><a href="module-server_automation.html#~restartAutoRepair">restartAutoRepair</a></li><li data-type='method'><a href="module-server_automation.html#~runAutoRepair">runAutoRepair</a></li><li data-type='method'><a href="module-server_automation.html#~scheduleAutoRepair">scheduleAutoRepair</a></li></ul></li><li><a href="module-server_autopilot.html">server/autopilot</a><ul class='methods'><li data-type='method'><a href="module-server_autopilot.html#~analyzeVesselDepartures">analyzeVesselDepartures</a></li><li data-type='method'><a href="module-server_autopilot.html#~autoRebuyAll">autoRebuyAll</a></li><li data-type='method'><a href="module-server_autopilot.html#~checkPriceAlerts">checkPriceAlerts</a></li><li data-type='method'><a href="module-server_autopilot.html#~countActiveCampaignTypes">countActiveCampaignTypes</a></li><li data-type='method'><a href="module-server_autopilot.html#~initializeAutopilotState">initializeAutopilotState</a></li><li data-type='method'><a href="module-server_autopilot.html#~isAutopilotPaused">isAutopilotPaused</a></li><li data-type='method'><a href="module-server_autopilot.html#~mainEventLoop">mainEventLoop</a></li><li data-type='method'><a href="module-server_autopilot.html#~pauseAutopilot">pauseAutopilot</a></li><li data-type='method'><a href="module-server_autopilot.html#~resumeAutopilot">resumeAutopilot</a></li><li data-type='method'><a href="module-server_autopilot.html#~setBroadcastFunction">setBroadcastFunction</a></li><li data-type='method'><a href="module-server_autopilot.html#~startMainEventLoop">startMainEventLoop</a></li><li data-type='method'><a href="module-server_autopilot.html#~tryUpdateAllData">tryUpdateAllData</a></li><li data-type='method'><a href="module-server_autopilot.html#~updateAllData">updateAllData</a></li><li data-type='method'><a href="module-server_autopilot.html#~updateCampaigns">updateCampaigns</a></li><li data-type='method'><a href="module-server_autopilot.html#~updatePrices">updatePrices</a></li><li data-type='method'><a href="module-server_autopilot.html#~updateRepairCount">updateRepairCount</a></li><li data-type='method'><a href="module-server_autopilot.html#~updateUnreadMessages">updateUnreadMessages</a></li><li data-type='method'><a href="module-server_autopilot.html#~updateVesselCount">updateVesselCount</a></li></ul></li><li><a href="module-server_autopilot_pilot_atmosphere_broker.html">server/autopilot/pilot_atmosphere_broker</a><ul class='methods'><li data-type='method'><a href="module-server_autopilot_pilot_atmosphere_broker.html#~autoRebuyCO2">autoRebuyCO2</a></li></ul></li><li><a href="module-server_autopilot_pilot_barrel_boss.html">server/autopilot/pilot_barrel_boss</a><ul class='methods'><li data-type='method'><a href="module-server_autopilot_pilot_barrel_boss.html#~autoRebuyFuel">autoRebuyFuel</a></li></ul></li><li><a href="module-server_autopilot_pilot_captain_blackbeard.html">server/autopilot/pilot_captain_blackbeard</a><ul class='methods'><li data-type='method'><a href="module-server_autopilot_pilot_captain_blackbeard.html#~acceptRansomWithRetry">acceptRansomWithRetry</a></li><li data-type='method'><a href="module-server_autopilot_pilot_captain_blackbeard.html#~autoNegotiateHijacking">autoNegotiateHijacking</a></li><li data-type='method'><a href="module-server_autopilot_pilot_captain_blackbeard.html#~getCaseWithRetry">getCaseWithRetry</a></li><li data-type='method'><a href="module-server_autopilot_pilot_captain_blackbeard.html#~processHijackingCase">processHijackingCase</a></li><li data-type='method'><a href="module-server_autopilot_pilot_captain_blackbeard.html#~submitOfferWithRetry">submitOfferWithRetry</a></li></ul></li><li><a href="module-server_autopilot_pilot_cargo_marshal.html">server/autopilot/pilot_cargo_marshal</a><ul class='methods'><li data-type='method'><a href="module-server_autopilot_pilot_cargo_marshal.html#~autoDepartVessels">autoDepartVessels</a></li><li data-type='method'><a href="module-server_autopilot_pilot_cargo_marshal.html#~calculateRemainingDemand">calculateRemainingDemand</a></li><li data-type='method'><a href="module-server_autopilot_pilot_cargo_marshal.html#~departVessels">departVessels</a></li><li data-type='method'><a href="module-server_autopilot_pilot_cargo_marshal.html#~getTotalCapacity">getTotalCapacity</a></li></ul></li><li><a href="module-server_autopilot_pilot_fair_hand.html">server/autopilot/pilot_fair_hand</a><ul class='methods'><li data-type='method'><a href="module-server_autopilot_pilot_fair_hand.html#~autoCoop">autoCoop</a></li></ul></li><li><a href="module-server_autopilot_pilot_harbormaster.html">server/autopilot/pilot_harbormaster</a><ul class='methods'><li data-type='method'><a href="module-server_autopilot_pilot_harbormaster.html#~autoAnchorPointPurchase">autoAnchorPointPurchase</a></li></ul></li><li><a href="module-server_autopilot_pilot_reputation_chief.html">server/autopilot/pilot_reputation_chief</a><ul class='methods'><li data-type='method'><a href="module-server_autopilot_pilot_reputation_chief.html#~autoCampaignRenewal">autoCampaignRenewal</a></li></ul></li><li><a href="module-server_autopilot_pilot_yard_foreman.html">server/autopilot/pilot_yard_foreman</a><ul class='methods'><li data-type='method'><a href="module-server_autopilot_pilot_yard_foreman.html#~autoRepairVessels">autoRepairVessels</a></li></ul></li><li><a href="module-server_cache.html">server/cache</a><ul class='methods'><li data-type='method'><a href="module-server_cache.html#~clearAllCaches">clearAllCaches</a></li><li data-type='method'><a href="module-server_cache.html#~getAllianceCache">getAllianceCache</a></li><li data-type='method'><a href="module-server_cache.html#~getCampaignCache">getCampaignCache</a></li><li data-type='method'><a href="module-server_cache.html#~getCompanyCache">getCompanyCache</a></li><li data-type='method'><a href="module-server_cache.html#~getCoopCache">getCoopCache</a></li><li data-type='method'><a href="module-server_cache.html#~invalidateCampaignCache">invalidateCampaignCache</a></li><li data-type='method'><a href="module-server_cache.html#~invalidateCoopCache">invalidateCoopCache</a></li><li data-type='method'><a href="module-server_cache.html#~isCacheValid">isCacheValid</a></li><li data-type='method'><a href="module-server_cache.html#~setAllianceCache">setAllianceCache</a></li><li data-type='method'><a href="module-server_cache.html#~setCampaignCache">setCampaignCache</a></li><li data-type='method'><a href="module-server_cache.html#~setCompanyCache">setCompanyCache</a></li><li data-type='method'><a href="module-server_cache.html#~setCoopCache">setCoopCache</a></li></ul></li><li><a href="module-server_certificate.html">server/certificate</a><ul class='methods'><li data-type='method'><a href="module-server_certificate.html#~createHttpsServer">createHttpsServer</a></li><li data-type='method'><a href="module-server_certificate.html#~generateCA">generateCA</a></li><li data-type='method'><a href="module-server_certificate.html#~generateCertificate">generateCertificate</a></li><li data-type='method'><a href="module-server_certificate.html#~getNetworkIPs">getNetworkIPs</a></li><li data-type='method'><a href="module-server_certificate.html#~isCertificateInstalled">isCertificateInstalled</a></li><li data-type='method'><a href="module-server_certificate.html#~loadCertificate">loadCertificate</a></li></ul></li><li><a href="module-server_chatbot.html">server/chatbot</a></li><li><a href="module-server_config.html">server/config</a><ul class='methods'><li data-type='method'><a href="module-server_config.html#~getAppDataDir">getAppDataDir</a></li><li data-type='method'><a href="module-server_config.html#~getLocalAppDataDir">getLocalAppDataDir</a></li><li data-type='method'><a href="module-server_config.html#~getLogDir">getLogDir</a></li><li data-type='method'><a href="module-server_config.html#~getSessionCookie">getSessionCookie</a></li><li data-type='method'><a href="module-server_config.html#~getSettingsDir">getSettingsDir</a></li><li data-type='method'><a href="module-server_config.html#~loadStartupSettings">loadStartupSettings</a></li><li data-type='method'><a href="module-server_config.html#~setSessionCookie">setSessionCookie</a></li></ul></li><li><a href="module-server_gameapi.html">server/gameapi</a><ul class='methods'><li data-type='method'><a href="module-server_gameapi.html#~activateCampaign">activateCampaign</a></li><li data-type='method'><a href="module-server_gameapi.html#~bulkRepairVessels">bulkRepairVessels</a></li><li data-type='method'><a href="module-server_gameapi.html#~departVessel">departVessel</a></li><li data-type='method'><a href="module-server_gameapi.html#~fetchAssignedPorts">fetchAssignedPorts</a></li><li data-type='method'><a href="module-server_gameapi.html#~fetchAutoPrice">fetchAutoPrice</a></li><li data-type='method'><a href="module-server_gameapi.html#~fetchBunkerState">fetchBunkerState</a></li><li data-type='method'><a href="module-server_gameapi.html#~fetchCampaigns">fetchCampaigns</a></li><li data-type='method'><a href="module-server_gameapi.html#~fetchEventData">fetchEventData</a></li><li data-type='method'><a href="module-server_gameapi.html#~fetchPrices">fetchPrices</a></li><li data-type='method'><a href="module-server_gameapi.html#~fetchRepairCount">fetchRepairCount</a></li><li data-type='method'><a href="module-server_gameapi.html#~fetchUnreadMessages">fetchUnreadMessages</a></li><li data-type='method'><a href="module-server_gameapi.html#~fetchVessels">fetchVessels</a></li><li data-type='method'><a href="module-server_gameapi.html#~getMaintenanceCost">getMaintenanceCost</a></li><li data-type='method'><a href="module-server_gameapi.html#~purchaseCO2">purchaseCO2</a></li><li data-type='method'><a href="module-server_gameapi.html#~purchaseFuel">purchaseFuel</a></li></ul></li><li><a href="module-server_middleware_index.html">server/middleware/index</a><ul class='methods'><li data-type='method'><a href="module-server_middleware_index.html#~setupMiddleware">setupMiddleware</a></li></ul></li><li><a href="module-server_routes_alliance.html">server/routes/alliance</a><ul class='methods'><li data-type='method'><a href="module-server_routes_alliance.html#.GET/api/alliance-members">GET /api/alliance-members</a></li><li data-type='method'><a href="module-server_routes_alliance.html#.GET/api/chat">GET /api/chat</a></li><li data-type='method'><a href="module-server_routes_alliance.html#.POST/api/company-name">POST /api/company-name</a></li><li data-type='method'><a href="module-server_routes_alliance.html#.POST/api/send-message">POST /api/send-message</a></li></ul></li><li><a href="module-server_routes_anchor.html">server/routes/anchor</a></li><li><a href="module-server_routes_coop.html">server/routes/coop</a><ul class='methods'><li data-type='method'><a href="module-server_routes_coop.html#.GET/api/coop/data">GET /api/coop/data</a></li><li data-type='method'><a href="module-server_routes_coop.html#.POST/api/coop/send-max">POST /api/coop/send-max</a></li></ul></li><li><a href="module-server_routes_forecast.html">server/routes/forecast</a><ul class='methods'><li data-type='method'><a href="module-server_routes_forecast.html#~convertCESTToTimezone">convertCESTToTimezone</a></li><li data-type='method'><a href="module-server_routes_forecast.html#~generateChatbotText">generateChatbotText</a></li><li data-type='method'><a href="module-server_routes_forecast.html#~generateMetadata">generateMetadata</a></li><li data-type='method'><a href="module-server_routes_forecast.html#~getForecastDataPath">getForecastDataPath</a></li><li data-type='method'><a href="module-server_routes_forecast.html#~getNextDayData">getNextDayData</a></li><li data-type='method'><a href="module-server_routes_forecast.html#~getPreviousDayData">getPreviousDayData</a></li><li data-type='method'><a href="module-server_routes_forecast.html#~getServerLocalTimezone">getServerLocalTimezone</a></li><li data-type='method'><a href="module-server_routes_forecast.html#~getTimezoneOffsetHours">getTimezoneOffsetHours</a></li><li data-type='method'><a href="module-server_routes_forecast.html#~getValidTimezones">getValidTimezones</a></li></ul></li><li><a href="module-server_routes_game.html">server/routes/game</a></li><li><a href="module-server_routes_health.html">server/routes/health</a></li><li><a href="module-server_routes_messenger.html">server/routes/messenger</a><ul class='methods'><li data-type='method'><a href="module-server_routes_messenger.html#.GET/api/contact/get-contacts">GET /api/contact/get-contacts</a></li><li data-type='method'><a href="module-server_routes_messenger.html#.GET/api/hijacking/get-cases">GET /api/hijacking/get-cases</a></li><li data-type='method'><a href="module-server_routes_messenger.html#.GET/api/messenger/get-chats">GET /api/messenger/get-chats</a></li><li data-type='method'><a href="module-server_routes_messenger.html#.POST/api/messenger/delete-chat">POST /api/messenger/delete-chat</a></li><li data-type='method'><a href="module-server_routes_messenger.html#.POST/api/messenger/get-messages">POST /api/messenger/get-messages</a></li><li data-type='method'><a href="module-server_routes_messenger.html#.POST/api/messenger/send-private">POST /api/messenger/send-private</a></li><li data-type='method'><a href="module-server_routes_messenger.html#.POST/api/user/search">POST /api/user/search</a></li><li data-type='method'><a href="module-server_routes_messenger.html#~migrateHijackHistory">migrateHijackHistory</a></li></ul></li><li><a href="module-server_routes_settings.html">server/routes/settings</a><ul class='methods'><li data-type='method'><a href="module-server_routes_settings.html#.GET/api/settings">GET /api/settings</a></li><li data-type='method'><a href="module-server_routes_settings.html#.POST/api/settings">POST /api/settings</a></li></ul></li><li><a href="module-server_scheduler.html">server/scheduler</a><ul class='methods'><li data-type='method'><a href="module-server_scheduler.html#~initScheduler">initScheduler</a></li><li data-type='method'><a href="module-server_scheduler.html#~isServerReady">isServerReady</a></li></ul></li><li><a href="module-server_settings-schema.html">server/settings-schema</a><ul class='methods'><li data-type='method'><a href="module-server_settings-schema.html#~getDefault">getDefault</a></li><li data-type='method'><a href="module-server_settings-schema.html#~getDefaults">getDefaults</a></li><li data-type='method'><a href="module-server_settings-schema.html#~getRequiredKeys">getRequiredKeys</a></li><li data-type='method'><a href="module-server_settings-schema.html#~getSettingsFilePath">getSettingsFilePath</a></li><li data-type='method'><a href="module-server_settings-schema.html#~initializeSettings">initializeSettings</a></li><li data-type='method'><a href="module-server_settings-schema.html#~saveSettings">saveSettings</a></li><li data-type='method'><a href="module-server_settings-schema.html#~validateSettings">validateSettings</a></li><li data-type='method'><a href="module-server_settings-schema.html#~validateValue">validateValue</a></li></ul></li><li><a href="module-server_state.html">server/state</a><ul class='methods'><li data-type='method'><a href="module-server_state.html#~getAutopilotState">getAutopilotState</a></li><li data-type='method'><a href="module-server_state.html#~getBunkerState">getBunkerState</a></li><li data-type='method'><a href="module-server_state.html#~getCampaignStatus">getCampaignStatus</a></li><li data-type='method'><a href="module-server_state.html#~getCoopData">getCoopData</a></li><li data-type='method'><a href="module-server_state.html#~getEventData">getEventData</a></li><li data-type='method'><a href="module-server_state.html#~getHeaderData">getHeaderData</a></li><li data-type='method'><a href="module-server_state.html#~getLastCO2Alert">getLastCO2Alert</a></li><li data-type='method'><a href="module-server_state.html#~getLastFuelAlert">getLastFuelAlert</a></li><li data-type='method'><a href="module-server_state.html#~getPrices">getPrices</a></li><li data-type='method'><a href="module-server_state.html#~getRepairCount">getRepairCount</a></li><li data-type='method'><a href="module-server_state.html#~getSettings">getSettings</a></li><li data-type='method'><a href="module-server_state.html#~getUserState">getUserState</a></li><li data-type='method'><a href="module-server_state.html#~getVesselCounts">getVesselCounts</a></li><li data-type='method'><a href="module-server_state.html#~isAutopilotPaused">isAutopilotPaused</a></li><li data-type='method'><a href="module-server_state.html#~setAutopilotPaused">setAutopilotPaused</a></li><li data-type='method'><a href="module-server_state.html#~setAutopilotState">setAutopilotState</a></li><li data-type='method'><a href="module-server_state.html#~setLastCO2Alert">setLastCO2Alert</a></li><li data-type='method'><a href="module-server_state.html#~setLastFuelAlert">setLastFuelAlert</a></li><li data-type='method'><a href="module-server_state.html#~updateBunkerState">updateBunkerState</a></li><li data-type='method'><a href="module-server_state.html#~updateCampaignStatus">updateCampaignStatus</a></li><li data-type='method'><a href="module-server_state.html#~updateCoopData">updateCoopData</a></li><li data-type='method'><a href="module-server_state.html#~updateEventData">updateEventData</a></li><li data-type='method'><a href="module-server_state.html#~updateHeaderData">updateHeaderData</a></li><li data-type='method'><a href="module-server_state.html#~updatePrices">updatePrices</a></li><li data-type='method'><a href="module-server_state.html#~updateRepairCount">updateRepairCount</a></li><li data-type='method'><a href="module-server_state.html#~updateSettings">updateSettings</a></li><li data-type='method'><a href="module-server_state.html#~updateVesselCounts">updateVesselCounts</a></li></ul></li><li><a href="module-server_utils_api.html">server/utils/api</a><ul class='methods'><li data-type='method'><a href="module-server_utils_api.html#~apiCall">apiCall</a></li><li data-type='method'><a href="module-server_utils_api.html#~apiCallWithRetry">apiCallWithRetry</a></li><li data-type='method'><a href="module-server_utils_api.html#~getAllianceId">getAllianceId</a></li><li data-type='method'><a href="module-server_utils_api.html#~getChatFeed">getChatFeed</a></li><li data-type='method'><a href="module-server_utils_api.html#~getCompanyName">getCompanyName</a></li><li data-type='method'><a href="module-server_utils_api.html#~getUserCompanyName">getUserCompanyName</a></li><li data-type='method'><a href="module-server_utils_api.html#~getUserId">getUserId</a></li><li data-type='method'><a href="module-server_utils_api.html#~initializeAlliance">initializeAlliance</a></li><li data-type='method'><a href="module-server_utils_api.html#~sleep">sleep</a></li></ul></li><li><a href="module-server_utils_encryption.html">server/utils/encryption</a><ul class='methods'><li data-type='method'><a href="module-server_utils_encryption.html#~decryptData">decryptData</a></li><li data-type='method'><a href="module-server_utils_encryption.html#~deleteEncryptedData">deleteEncryptedData</a></li><li data-type='method'><a href="module-server_utils_encryption.html#~encryptData">encryptData</a></li><li data-type='method'><a href="module-server_utils_encryption.html#~getEncryptionInfo">getEncryptionInfo</a></li><li data-type='method'><a href="module-server_utils_encryption.html#~getMachineKey">getMachineKey</a></li><li data-type='method'><a href="module-server_utils_encryption.html#~isEncrypted">isEncrypted</a></li></ul></li><li><a href="module-server_utils_logger.html">server/utils/logger</a><ul class='methods'><li data-type='method'><a href="module-server_utils_logger.html#~debug">debug</a></li><li data-type='method'><a href="module-server_utils_logger.html#~error">error</a></li><li data-type='method'><a href="module-server_utils_logger.html#~isDebugMode">isDebugMode</a></li><li data-type='method'><a href="module-server_utils_logger.html#~loadLogLevel">loadLogLevel</a></li><li data-type='method'><a href="module-server_utils_logger.html#~log">log</a></li><li data-type='method'><a href="module-server_utils_logger.html#~warn">warn</a></li></ul></li><li><a href="module-server_utils_session-manager.html">server/utils/session-manager</a><ul class='methods'><li data-type='method'><a href="module-server_utils_session-manager.html#~deleteSession">deleteSession</a></li><li data-type='method'><a href="module-server_utils_session-manager.html#~getAllUserIds">getAllUserIds</a></li><li data-type='method'><a href="module-server_utils_session-manager.html#~getAvailableSessions">getAvailableSessions</a></li><li data-type='method'><a href="module-server_utils_session-manager.html#~getSession">getSession</a></li><li data-type='method'><a href="module-server_utils_session-manager.html#~getSessionsPath">getSessionsPath</a></li><li data-type='method'><a href="module-server_utils_session-manager.html#~hasSession">hasSession</a></li><li data-type='method'><a href="module-server_utils_session-manager.html#~loadAllSessions">loadAllSessions</a></li><li data-type='method'><a href="module-server_utils_session-manager.html#~loadSessions">loadSessions</a></li><li data-type='method'><a href="module-server_utils_session-manager.html#~migrateToEncrypted">migrateToEncrypted</a></li><li data-type='method'><a href="module-server_utils_session-manager.html#~saveSession">saveSession</a></li><li data-type='method'><a href="module-server_utils_session-manager.html#~saveSessions">saveSessions</a></li></ul></li><li><a href="module-server_websocket.html">server/websocket</a><ul class='methods'><li data-type='method'><a href="module-server_websocket.html#~broadcast">broadcast</a></li><li data-type='method'><a href="module-server_websocket.html#~broadcastBunkerUpdate">broadcastBunkerUpdate</a></li><li data-type='method'><a href="module-server_websocket.html#~broadcastToUser">broadcastToUser</a></li><li data-type='method'><a href="module-server_websocket.html#~getCachedHijackingCase">getCachedHijackingCase</a></li><li data-type='method'><a href="module-server_websocket.html#~getCachedMessengerChats">getCachedMessengerChats</a></li><li data-type='method'><a href="module-server_websocket.html#~getProcessedMessageIds">getProcessedMessageIds</a></li><li data-type='method'><a href="module-server_websocket.html#~getProcessedMessagesCachePath">getProcessedMessagesCachePath</a></li><li data-type='method'><a href="module-server_websocket.html#~initWebSocket">initWebSocket</a></li><li data-type='method'><a href="module-server_websocket.html#~loadProcessedMessageCache">loadProcessedMessageCache</a></li><li data-type='method'><a href="module-server_websocket.html#~performChatRefresh">performChatRefresh</a></li><li data-type='method'><a href="module-server_websocket.html#~performHijackingRefresh">performHijackingRefresh</a></li><li data-type='method'><a href="module-server_websocket.html#~performMessengerRefresh">performMessengerRefresh</a></li><li data-type='method'><a href="module-server_websocket.html#~saveProcessedMessageCache">saveProcessedMessageCache</a></li><li data-type='method'><a href="module-server_websocket.html#~startChatAutoRefresh">startChatAutoRefresh</a></li><li data-type='method'><a href="module-server_websocket.html#~startChatAutoRefresh">startChatAutoRefresh</a></li><li data-type='method'><a href="module-server_websocket.html#~startHijackingAutoRefresh">startHijackingAutoRefresh</a></li><li data-type='method'><a href="module-server_websocket.html#~startMessengerAutoRefresh">startMessengerAutoRefresh</a></li><li data-type='method'><a href="module-server_websocket.html#~stopChatAutoRefresh">stopChatAutoRefresh</a></li><li data-type='method'><a href="module-server_websocket.html#~stopHijackingAutoRefresh">stopHijackingAutoRefresh</a></li><li data-type='method'><a href="module-server_websocket.html#~stopMessengerAutoRefresh">stopMessengerAutoRefresh</a></li><li data-type='method'><a href="module-server_websocket.html#~triggerImmediateChatRefresh">triggerImmediateChatRefresh</a></li><li data-type='method'><a href="module-server_websocket.html#~triggerImmediateHijackingRefresh">triggerImmediateHijackingRefresh</a></li><li data-type='method'><a href="module-server_websocket.html#~triggerImmediateMessengerRefresh">triggerImmediateMessengerRefresh</a></li></ul></li><li><a href="module-ui-dialogs.html">ui-dialogs</a><ul class='methods'><li data-type='method'><a href="module-ui-dialogs.html#.buyCampaign">buyCampaign</a></li><li data-type='method'><a href="module-ui-dialogs.html#.closeCampaignsOverlay">closeCampaignsOverlay</a></li><li data-type='method'><a href="module-ui-dialogs.html#.closeSettings">closeSettings</a></li><li data-type='method'><a href="module-ui-dialogs.html#.showCampaignsOverlay">showCampaignsOverlay</a></li><li data-type='method'><a href="module-ui-dialogs.html#.showConfirmDialog">showConfirmDialog</a></li><li data-type='method'><a href="module-ui-dialogs.html#.showContactList">showContactList</a></li><li data-type='method'><a href="module-ui-dialogs.html#.showSettings">showSettings</a></li></ul></li><li><a href="module-utils.html">utils</a><ul class='methods'><li data-type='method'><a href="module-utils.html#.escapeHtml">escapeHtml</a></li><li data-type='method'><a href="module-utils.html#.formatNumber">formatNumber</a></li><li data-type='method'><a href="module-utils.html#.registerServiceWorker">registerServiceWorker</a></li><li data-type='method'><a href="module-utils.html#.renderStars">renderStars</a></li><li data-type='method'><a href="module-utils.html#.requestNotificationPermission">requestNotificationPermission</a></li><li data-type='method'><a href="module-utils.html#.showNotification">showNotification</a></li><li data-type='method'><a href="module-utils.html#.showSideNotification">showSideNotification</a></li></ul></li><li><a href="module-vessel-management.html">vessel-management</a><ul class='methods'><li data-type='method'><a href="module-vessel-management.html#.departAllVessels">departAllVessels</a></li><li data-type='method'><a href="module-vessel-management.html#.purchaseSingleVessel">purchaseSingleVessel</a></li><li data-type='method'><a href="module-vessel-management.html#.updateVesselCount">updateVesselCount</a></li><li data-type='method'><a href="module-vessel-management.html#~createVesselCard">createVesselCard</a></li><li data-type='method'><a href="module-vessel-management.html#~displayFilteredVessels">displayFilteredVessels</a></li><li data-type='method'><a href="module-vessel-management.html#~getAvailableAnchorSlots">getAvailableAnchorSlots</a></li><li data-type='method'><a href="module-vessel-management.html#~getCO2EfficiencyClass">getCO2EfficiencyClass</a></li><li data-type='method'><a href="module-vessel-management.html#~getCapacityDisplay">getCapacityDisplay</a></li><li data-type='method'><a href="module-vessel-management.html#~getFuelEfficiencyClass">getFuelEfficiencyClass</a></li><li data-type='method'><a href="module-vessel-management.html#~loadCartFromStorage">loadCartFromStorage</a></li><li data-type='method'><a href="module-vessel-management.html#~loadMorePendingVessels">loadMorePendingVessels</a></li><li data-type='method'><a href="module-vessel-management.html#~loadMoreVessels">loadMoreVessels</a></li><li data-type='method'><a href="module-vessel-management.html#~populateDynamicFilters">populateDynamicFilters</a></li><li data-type='method'><a href="module-vessel-management.html#~preloadCommonVesselImages">preloadCommonVesselImages</a></li><li data-type='method'><a href="module-vessel-management.html#~preloadVesselImage">preloadVesselImage</a></li><li data-type='method'><a href="module-vessel-management.html#~refreshVesselCardsIfVisible">refreshVesselCardsIfVisible</a></li><li data-type='method'><a href="module-vessel-management.html#~saveCartToStorage">saveCartToStorage</a></li><li data-type='method'><a href="module-vessel-management.html#~showBulkRepairDialog">showBulkRepairDialog</a></li><li data-type='method'><a href="module-vessel-management.html#~updateCapacityDropdowns">updateCapacityDropdowns</a></li><li data-type='method'><a href="module-vessel-management.html#~vesselPassesFilters">vesselPassesFilters</a></li></ul></li><li><a href="module-vessel-selling.html">vessel-selling</a><ul class='methods'><li data-type='method'><a href="module-vessel-selling.html#.bulkSellVessels">bulkSellVessels</a></li><li data-type='method'><a href="module-vessel-selling.html#.closeSellVesselsOverlay">closeSellVesselsOverlay</a></li><li data-type='method'><a href="module-vessel-selling.html#.openSellVesselsOverlay">openSellVesselsOverlay</a></li><li data-type='method'><a href="module-vessel-selling.html#.setSellFilter">setSellFilter</a></li><li data-type='method'><a href="module-vessel-selling.html#.showSellCart">showSellCart</a></li><li data-type='method'><a href="module-vessel-selling.html#~addVesselsToCart">addVesselsToCart</a></li><li data-type='method'><a href="module-vessel-selling.html#~displaySellVessels">displaySellVessels</a></li><li data-type='method'><a href="module-vessel-selling.html#~getCO2EfficiencyClass">getCO2EfficiencyClass</a></li><li data-type='method'><a href="module-vessel-selling.html#~getCapacityDisplay">getCapacityDisplay</a></li><li data-type='method'><a href="module-vessel-selling.html#~getFuelEfficiencyClass">getFuelEfficiencyClass</a></li><li data-type='method'><a href="module-vessel-selling.html#~groupVesselsByModel">groupVesselsByModel</a></li><li data-type='method'><a href="module-vessel-selling.html#~loadUserVesselsForSale">loadUserVesselsForSale</a></li><li data-type='method'><a href="module-vessel-selling.html#~removeVesselSelectionFromCart">removeVesselSelectionFromCart</a></li><li data-type='method'><a href="module-vessel-selling.html#~sellVessels">sellVessels</a></li><li data-type='method'><a href="module-vessel-selling.html#~toggleVesselSelection">toggleVesselSelection</a></li><li data-type='method'><a href="module-vessel-selling.html#~updateBulkSellButton">updateBulkSellButton</a></li><li data-type='method'><a href="module-vessel-selling.html#~updateSelectButtonState">updateSelectButtonState</a></li><li data-type='method'><a href="module-vessel-selling.html#~updateVesselSelectionInCart">updateVesselSelectionInCart</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#buildNav">buildNav</a></li><li><a href="global.html#deleteAllLogs">deleteAllLogs</a></li><li><a href="global.html#express">express</a></li><li><a href="global.html#flushAllToDisk">flushAllToDisk</a></li><li><a href="global.html#formatDetailsAsTXT">formatDetailsAsTXT</a></li><li><a href="global.html#formatFileSize">formatFileSize</a></li><li><a href="global.html#formatLogsAsCSV">formatLogsAsCSV</a></li><li><a href="global.html#formatLogsAsTXT">formatLogsAsTXT</a></li><li><a href="global.html#fs">fs</a></li><li><a href="global.html#getLogEntries">getLogEntries</a></li><li><a href="global.html#getLogFilePath">getLogFilePath</a></li><li><a href="global.html#getLogFileSize">getLogFileSize</a></li><li><a href="global.html#getLogsFromCache">getLogsFromCache</a></li><li><a href="global.html#initialize">initialize</a></li><li><a href="global.html#loadLogsFromDisk">loadLogsFromDisk</a></li><li><a href="global.html#lockBulkBuyButton">lockBulkBuyButton</a></li><li><a href="global.html#lockCo2Button">lockCo2Button</a></li><li><a href="global.html#lockCoopButtons">lockCoopButtons</a></li><li><a href="global.html#lockDepartButton">lockDepartButton</a></li><li><a href="global.html#lockFuelButton">lockFuelButton</a></li><li><a href="global.html#lockRepairButton">lockRepairButton</a></li><li><a href="global.html#logAutopilotAction">logAutopilotAction</a></li><li><a href="global.html#publish">publish</a></li><li><a href="global.html#searchInObject">searchInObject</a></li><li><a href="global.html#showAnchorTimer">showAnchorTimer</a></li><li><a href="global.html#shutdown">shutdown</a></li><li><a href="global.html#unlockBulkBuyButton">unlockBulkBuyButton</a></li><li><a href="global.html#unlockCo2Button">unlockCo2Button</a></li><li><a href="global.html#unlockCoopButtons">unlockCoopButtons</a></li><li><a href="global.html#unlockDepartButton">unlockDepartButton</a></li><li><a href="global.html#unlockFuelButton">unlockFuelButton</a></li><li><a href="global.html#unlockRepairButton">unlockRepairButton</a></li><li><a href="global.html#writeLogsToDisk">writeLogsToDisk</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">public/js/modules/bunker-management.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview Bunker Management Module - Handles fuel and CO2 quota purchasing, real-time price monitoring,
 * and automated price alerts for the Shipping Manager game. This module tracks commodity prices in 30-minute
 * UTC time slots and triggers browser/desktop notifications when prices fall below user-defined thresholds.
 * Also monitors marketing campaign status and notifies users when campaigns are not fully active.
 *
 * Key Features:
 * - Real-time fuel and CO2 price tracking with 30-minute UTC time slot granularity
 * - Price alert system with browser notifications when thresholds are met
 * - Maximum capacity tracking and purchase cost calculations
 * - Marketing campaign monitoring (3 types: reputation, awareness, green)
 * - Auto-rebuy integration for automated purchasing when conditions are met
 *
 * Price Alert Logic:
 * - Alerts trigger once per price change (prevents spam)
 * - Resets when price goes above threshold (allows re-alert on next drop)
 * - Supports both in-app visual alerts and desktop notifications
 *
 * @module bunker-management
 * @requires utils - Formatting, feedback, and notification functions
 * @requires api - Backend API calls for price data and purchases
 * @requires ui-dialogs - Confirmation dialogs for purchases
 */

import { formatNumber, showSideNotification, showNotification } from './utils.js';
import { fetchBunkerPrices, purchaseFuel as apiPurchaseFuel, purchaseCO2 as apiPurchaseCO2, fetchCampaigns } from './api.js';
import { showConfirmDialog } from './ui-dialogs.js';

/**
 * Maximum fuel storage capacity in tons.
 * Fetched from API (/user/get-company) - NEVER hardcoded.
 * @type {number}
 */
let maxFuel = 0;

/**
 * Maximum CO2 quota storage capacity in tons.
 * Fetched from API (/user/get-company) - NEVER hardcoded.
 * @type {number}
 */
let maxCO2 = 0;

/**
 * Current fuel inventory in tons.
 * Updated from API responses and decremented when vessels depart.
 * @type {number}
 */
let currentFuel = 0;

/**
 * Current CO2 quota inventory in tons.
 * Can be negative if player exceeded their quota. Updated from API responses.
 * @type {number}
 */
let currentCO2 = 0;

/**
 * Current cash balance in dollars.
 * Updated from API responses and used for purchase affordability checks.
 * NOTE: Always use window.updateDataCache.bunker.cash for live value in purchase dialogs
 * @type {number}
 */
let currentCash = 0;

/**
 * Current fuel price per ton in dollars.
 * Retrieved from API based on current UTC time slot (30-minute intervals).
 * @type {number|null}
 */
let fuelPrice = null;

/**
 * Current CO2 quota price per ton in dollars.
 * Retrieved from API based on current UTC time slot (30-minute intervals).
 * @type {number|null}
 */
let co2Price = null;

/**
 * Last known count of active marketing campaigns.
 * Used to detect changes in campaign status and trigger alerts accordingly.
 * @type {number|null}
 */
let lastCampaignsCount = null;

/**
 * Retry fetching prices if time slot not found
 * @param {string} targetTimeSlot - The time slot we're looking for
 * @param {number} attempt - Current attempt number (1-5)
 */
async function retryFetchPrices(targetTimeSlot, attempt) {
  if (attempt > 5) {
    if (window.DEBUG_MODE) {
      console.error('[Bunker Management]  Failed to fetch prices after 5 attempts - time slot still not available:', targetTimeSlot);
    }
    return;
  }

  try {
    if (window.DEBUG_MODE) {
      console.log(`[Bunker Management]  Retry attempt ${attempt}/5 - fetching prices for time slot: ${targetTimeSlot}`);
    }

    const response = await fetch('/api/bunker/get-prices');
    if (!response.ok) {
      throw new Error(`HTTP ${response.status}`);
    }

    const data = await response.json();
    const priceData = data.data.prices.find(p => p.time === targetTimeSlot);

    if (priceData &amp;&amp; priceData.fuel_price > 0 &amp;&amp; priceData.co2_price > 0) {
      // Success! Update prices
      fuelPrice = priceData.fuel_price;
      co2Price = priceData.co2_price;
      if (window.DEBUG_MODE) {
        console.log(`[Bunker Management]  Retry successful on attempt ${attempt} - prices updated:`, {
          timeSlot: targetTimeSlot,
          fuel: fuelPrice,
          co2: co2Price
        });
      }

      // Trigger a UI update
      const settings = window.getSettings ? window.getSettings() : { fuelThreshold: 400, co2Threshold: 7 };
      await updateBunkerStatus(settings);
    } else {
      // Time slot still not available, retry again
      if (window.DEBUG_MODE) {
        console.log(`[Bunker Management]  Attempt ${attempt} - time slot still not available, retrying in 2s...`);
      }
      setTimeout(() => {
        retryFetchPrices(targetTimeSlot, attempt + 1);
      }, 2000);
    }
  } catch (error) {
    if (window.DEBUG_MODE) {
      console.error(`[Bunker Management]  Retry attempt ${attempt} failed:`, error.message);
    }
    // Retry on error
    setTimeout(() => {
      retryFetchPrices(targetTimeSlot, attempt + 1);
    }, 2000);
  }
}

/**
 * Sets capacity values from bunker_update event data.
 * Called when WebSocket sends maxFuel and maxCO2 values.
 * Only logs when capacity values actually change.
 * @param {number} newMaxFuel - Max fuel capacity in tons
 * @param {number} newMaxCO2 - Max CO2 capacity in tons
 */
export function setCapacityFromBunkerUpdate(newMaxFuel, newMaxCO2) {
  // Check if values are provided and valid
  if (newMaxFuel !== undefined &amp;&amp; newMaxFuel > 0) {
    // First time initialization (maxFuel is 0) - set without logging
    if (maxFuel === 0) {
      maxFuel = newMaxFuel;
    }
    // Value changed - update and log
    else if (newMaxFuel !== maxFuel) {
      maxFuel = newMaxFuel;
      console.log(`[Bunker] Capacity updated from server - Fuel: ${maxFuel}t, CO2: ${maxCO2}t`);
    }
  }

  if (newMaxCO2 !== undefined &amp;&amp; newMaxCO2 > 0) {
    // First time initialization (maxCO2 is 0) - set without logging
    if (maxCO2 === 0) {
      maxCO2 = newMaxCO2;
    }
    // Value changed - update and log (only if we didn't already log for fuel)
    else if (newMaxCO2 !== maxCO2) {
      maxCO2 = newMaxCO2;
      // Only log if fuel didn't change (to avoid double logging)
      if (newMaxFuel === undefined || newMaxFuel &lt;= 0 || newMaxFuel === maxFuel) {
        console.log(`[Bunker] Capacity updated from server - Fuel: ${maxFuel}t, CO2: ${maxCO2}t`);
      }
    }
  }
}

/**
 * Updates bunker (fuel/CO2) status display and triggers price alerts if thresholds are met.
 * This is the core function for monitoring commodity prices and inventory levels.
 *
 * Price Monitoring Strategy:
 * - Prices update every 30 minutes based on UTC time slots (e.g., 14:00, 14:30, 15:00)
 * - Compares current prices against user-configured thresholds
 * - Triggers visual and desktop notifications when prices drop below thresholds
 * - Only alerts once per price drop to prevent notification spam
 *
 * Side Effects:
 * - Updates DOM elements for fuel, CO2, cash, and price displays
 * - Triggers browser notifications (if permission granted)
 * - Shows in-app price alert overlays
 * - Calls auto-rebuy checks via global callback (if AutoPilot enabled)
 * - Updates button tooltips with purchase calculations
 *
 * @async
 * @param {Object} settings - User settings object containing price thresholds
 * @param {number} settings.fuelThreshold - Fuel price threshold in $/ton for alerts
 * @param {number} settings.co2Threshold - CO2 price threshold in $/ton for alerts
 * @returns {Promise&lt;void>}
 * @throws {Error} Silently catches and logs errors to console
 *
 * @example
 * // Called automatically every 30-35 seconds by main app
 * updateBunkerStatus({ fuelThreshold: 400, co2Threshold: 7 });
 */
export async function updateBunkerStatus(settings) {
  try {
    // Silent update - no user feedback for routine updates
    const data = await fetchBunkerPrices();

    if (!data.user || data.user.cash === undefined) {
      console.error('[Bunker Management] API returned invalid data:', data);
      throw new Error('Failed to fetch bunker data: user.cash is undefined');
    }

    currentFuel = data.user.fuel / 1000;
    currentCO2 = data.user.co2 / 1000;
    currentCash = data.user.cash;

    const now = new Date();
    const localHours = now.getHours(); // Local hours, not UTC (prices are in local time)
    const localMinutes = now.getMinutes();
    const currentTimeSlot = `${String(localHours).padStart(2, '0')}:${localMinutes &lt; 30 ? '00' : '30'}`;

    let currentPriceData = data.data.prices.find(p => p.time === currentTimeSlot);

    // If no exact match found, check for event discounted prices
    if (!currentPriceData) {
      const discountedFuel = data.data.discounted_fuel;
      const discountedCO2 = data.data.discounted_co2;

      if (discountedFuel !== null &amp;&amp; discountedFuel !== undefined &amp;&amp;
          discountedCO2 !== null &amp;&amp; discountedCO2 !== undefined &amp;&amp;
          discountedFuel > 0 &amp;&amp; discountedCO2 > 0) {
        // Event prices found - use them directly
        fuelPrice = discountedFuel;
        co2Price = discountedCO2;
        console.log('[Bunker Management] Using event discounted prices - fuel:', fuelPrice, 'co2:', co2Price);

        // Skip normal price update logic below and go straight to display update
        currentPriceData = { fuel_price: fuelPrice, co2_price: co2Price, time: 'EVENT' };
      } else {
        // No timeslot match and no event prices - trigger retry
        if (window.DEBUG_MODE) {
          console.warn('[Bunker Management] Time slot not found and no event prices available - retrying in 2s');
        }
        setTimeout(() => retryFetchPrices(currentTimeSlot, 1), 2000);
        return;
      }
    }

    // Only update module-level prices if we have valid data (> 0)
    if (currentPriceData &amp;&amp; currentPriceData.fuel_price > 0 &amp;&amp; currentPriceData.co2_price > 0) {
      fuelPrice = currentPriceData.fuel_price;
      co2Price = currentPriceData.co2_price;
    } else if (currentPriceData) {
      // Log warning if we received price data but it's invalid
      console.warn('[Bunker Management]  Received invalid price data - NOT updating prices:', {
        fuel: currentPriceData.fuel_price,
        co2: currentPriceData.co2_price,
        timeSlot: currentPriceData.time
      });
    }

    const fuelDisplay = document.getElementById('fuelDisplay');
    const co2Display = document.getElementById('co2Display');
    const cashDisplay = document.getElementById('cashDisplay');
    const fuelPriceDisplay = document.getElementById('fuelPriceDisplay');
    const co2PriceDisplay = document.getElementById('co2PriceDisplay');

    // CRITICAL: Only update displays if we have VALID MAX values (right side > 0)
    // Left side (current values) CAN be 0 or even negative (CO2) - that's OK!
    // We only check if maxFuel/maxCO2 > 0 to know we have real data from API
    // If max values are 0, we got invalid data or no data yet - DO NOT display anything

    if (maxFuel > 0) {
      // currentFuel can be 0 (empty tank) - that's fine, we still show it
      fuelDisplay.innerHTML = `${formatNumber(Math.floor(currentFuel))} &lt;b>t&lt;/b> &lt;b>/&lt;/b> ${formatNumber(Math.floor(maxFuel))} &lt;b>t&lt;/b>`;
    }

    if (maxCO2 > 0) {
      // currentCO2 can be 0 or NEGATIVE - that's fine, we still show it
      if (currentCO2 &lt; 0) {
        co2Display.innerHTML = `-${formatNumber(Math.floor(Math.abs(currentCO2)))} &lt;b>t&lt;/b> &lt;b>/&lt;/b> ${formatNumber(Math.floor(maxCO2))} &lt;b>t&lt;/b>`;
      } else {
        co2Display.innerHTML = `${formatNumber(Math.floor(currentCO2))} &lt;b>t&lt;/b> &lt;b>/&lt;/b> ${formatNumber(Math.floor(maxCO2))} &lt;b>t&lt;/b>`;
      }
    }

    // Cash: If we have valid bunker data (maxFuel > 0), show cash even if 0 (user could be broke)
    // Only skip display if we have NO data yet at all
    if (maxFuel > 0 || maxCO2 > 0) {
      cashDisplay.textContent = `$${formatNumber(currentCash)}`;
    }

    // Only update price display if we have valid prices (> 0), otherwise keep last known value
    if (fuelPrice &amp;&amp; fuelPrice > 0) {
      fuelPriceDisplay.textContent = `$${formatNumber(fuelPrice)}/t`;
      fuelPriceDisplay.className = ''; // Clear existing classes

      // Check if below alert threshold (pulse animation)
      if (fuelPrice &lt; settings.fuelThreshold) {
        fuelPriceDisplay.className = 'price-pulse-alert';
      } else {
        // Apply standard color based on price ranges
        if (fuelPrice >= 800) {
          fuelPriceDisplay.className = 'fuel-red';
        } else if (fuelPrice >= 600) {
          fuelPriceDisplay.className = 'fuel-orange';
        } else if (fuelPrice >= 400) {
          fuelPriceDisplay.className = 'fuel-blue';
        } else if (fuelPrice >= 1) {
          fuelPriceDisplay.className = 'fuel-green';
        }
      }
    }

    // CRITICAL: Only update CO2 price if VALID (> 0)
    // DO NOT show 0 or invalid values - keep cached value instead
    if (co2Price !== null &amp;&amp; co2Price !== undefined &amp;&amp; co2Price > 0) {
      co2PriceDisplay.textContent = `$${formatNumber(co2Price)}/t`;
      co2PriceDisplay.className = ''; // Clear existing classes

      // Check if below alert threshold (pulse animation)
      if (co2Price &lt; settings.co2Threshold) {
        co2PriceDisplay.className = 'price-pulse-alert';
      } else {
        // Apply standard color based on price ranges
        if (co2Price >= 20) {
          co2PriceDisplay.className = 'co2-red';
        } else if (co2Price >= 15) {
          co2PriceDisplay.className = 'co2-orange';
        } else if (co2Price >= 10) {
          co2PriceDisplay.className = 'co2-blue';
        } else if (co2Price >= 1) {
          co2PriceDisplay.className = 'co2-green';
        }
      }
    } else if (co2Price !== null &amp;&amp; co2Price !== undefined &amp;&amp; co2Price &lt; 0) {
      // Special case: Negative CO2 prices (you get paid!)
      co2PriceDisplay.textContent = `$${formatNumber(co2Price)}/t`;
      co2PriceDisplay.className = 'co2-negative';
    } else if (co2Price === 0) {
      // Log detailed warning if co2Price is exactly 0 - this should NEVER happen
      // This means either: 1) Never loaded any prices yet, or 2) API gave us invalid data
      console.warn('[Bunker Management]  CO2 price is ZERO - NOT displaying (keeping cached value in display)', {
        reason: 'co2Price module variable is still 0 (initial value or invalid API data)',
        currentPriceDataFound: !!currentPriceData,
        apiCallSucceeded: !!data,
        pricesArrayLength: data?.data?.prices?.length || 0,
        note: 'If this happens on first load, it is normal. If it happens later, check if API call succeeded or if time slot matching failed.'
      });
    }
    // If co2Price is null, undefined, or EXACTLY 0: DO NOTHING - keep last cached value

    const fuelNeeded = Math.ceil(Math.max(0, maxFuel - currentFuel));
    const co2Needed = Math.ceil(Math.max(0, maxCO2 - currentCO2));
    const fuelCost = Math.round(fuelNeeded * fuelPrice);
    const co2Cost = Math.round(co2Needed * co2Price);

    document.getElementById('fuelBtn').title = `Buy ${formatNumber(fuelNeeded)}t fuel for $${formatNumber(fuelCost)} (Price: $${fuelPrice}/t)`;
    document.getElementById('co2Btn').title = `Buy ${formatNumber(co2Needed)}t CO2 for $${formatNumber(co2Cost)} (Price: $${co2Price}/t)`;

    // Cache prices for next page load - only if valid
    if (window.saveBadgeCache &amp;&amp; fuelPrice > 0 &amp;&amp; co2Price > 0) {
      window.saveBadgeCache({ prices: { fuelPrice, co2Price } });
    }

    // Price alerts and auto-rebuy are now handled exclusively by backend
    // Backend checks prices at :01 and :31 minutes every hour
    // See: server/autopilot.js - autoRebuyForAllUsers()

  } catch (error) {
    console.error('Error updating bunker status:', error);
  }
}

/**
 * Updates marketing campaigns status display and triggers alerts for inactive campaigns.
 * Monitors three required campaign types: reputation, awareness, and green.
 *
 * Campaign Monitoring Logic:
 * - Checks if all 3 required campaign types are active
 * - Updates badge display showing active count (hidden if all 3 active)
 * - On first load: alerts if not all campaigns active
 * - On subsequent checks: alerts on any count change
 * - Shows success feedback when reaching 3/3 active
 *
 * Side Effects:
 * - Updates DOM badge display and button tooltip
 * - Triggers desktop notifications for campaign status changes
 * - Shows in-app price alerts for campaign warnings
 * - Updates lastCampaignsCount state for change detection
 *
 * @async
 * @returns {Promise&lt;void>}
 * @throws {Error} Silently catches and logs errors to console
 *
 * @example
 * // Called automatically every 30-35 seconds alongside bunker updates
 * updateCampaignsStatus();
 */
export async function updateCampaignsStatus() {
  try {
    const data = await fetchCampaigns();

    const activeCampaigns = data.data.active_campaigns || [];
    const activeTypes = new Set(activeCampaigns.map(c => c.option_name));

    const requiredTypes = ['reputation', 'awareness', 'green'];
    const activeCount = requiredTypes.filter(type => activeTypes.has(type)).length;

    const badge = document.getElementById('campaignsCount');
    const button = document.getElementById('campaignsBtn');

    // Only show badge if &lt; 3 campaigns (0, 1, or 2)
    if (activeCount &lt; 3) {
      badge.textContent = activeCount;
      badge.classList.remove('hidden');
    } else {
      badge.classList.add('hidden');
    }

    // Update header display
    const campaignsHeaderDisplay = document.getElementById('campaignsHeaderDisplay');
    if (campaignsHeaderDisplay) {
      campaignsHeaderDisplay.textContent = activeCount;
      if (activeCount >= 3) {
        campaignsHeaderDisplay.classList.remove('text-danger');
        campaignsHeaderDisplay.classList.add('text-success');
      } else {
        campaignsHeaderDisplay.classList.remove('text-success');
        campaignsHeaderDisplay.classList.add('text-danger');
      }
    }

    const statusList = requiredTypes.map(type => {
      const isActive = activeTypes.has(type);
      const icon = isActive ? '' : '';
      const name = type.charAt(0).toUpperCase() + type.slice(1);
      return `${icon} ${name}`;
    }).join('\n');

    button.title = `Marketing Campaigns (${activeCount}/3 active)\n${statusList}`;

    if (lastCampaignsCount === null) {
      if (activeCount !== 3) {
        showSideNotification(` &lt;strong>Marketing Campaigns&lt;/strong>&lt;br>&lt;br>Only ${activeCount}/3 campaigns are active!`, 'warning', null, true);

        if (Notification.permission === 'granted') {
          await showNotification(' Marketing Campaigns Alert!', {
            body: `Only ${activeCount}/3 campaigns active`,
            icon: "data:image/svg+xml,&lt;svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>&lt;text y='50%' x='50%' text-anchor='middle' font-size='80'>&lt;/text>&lt;/svg>",
            tag: 'campaigns-alert',
            silent: false
          });
        }
      }
    } else if (lastCampaignsCount !== activeCount) {
      if (activeCount === 3) {
        showSideNotification(' All 3 marketing campaigns are now active!', 'success');
      } else {
        showSideNotification(` &lt;strong>Marketing Campaigns&lt;/strong>&lt;br>&lt;br>${activeCount}/3 campaigns active`, 'warning', null, true);

        if (Notification.permission === 'granted') {
          await showNotification(' Marketing Campaigns Alert!', {
            body: `Only ${activeCount}/3 campaigns active`,
            icon: "data:image/svg+xml,&lt;svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>&lt;text y='50%' x='50%' text-anchor='middle' font-size='80'>&lt;/text>&lt;/svg>",
            tag: 'campaigns-alert',
            silent: false
          });
        }
      }
    }

    lastCampaignsCount = activeCount;

    // Cache campaigns count for next page load
    if (window.saveBadgeCache) {
      window.saveBadgeCache({ campaigns: activeCount });
    }

  } catch (error) {
    console.error('Error updating campaigns status:', error);
  }
}

/**
 * Initiates purchase of fuel to fill the tank to maximum capacity.
 * Calculates amount needed, shows confirmation dialog with cost breakdown, and processes purchase.
 *
 * Purchase Flow:
 * 1. Calculate fuel needed (maxFuel - currentFuel)
 * 2. Check if already full (early exit if needed = 0)
 * 3. Calculate total cost (needed  current price)
 * 4. Show confirmation dialog with purchase details
 * 5. Process API purchase if confirmed
 * 6. Trigger bunker status refresh after successful purchase
 *
 * Side Effects:
 * - Shows confirmation dialog (blocks until user responds)
 * - Makes API call to purchase fuel
 * - Updates UI via debounced bunker status refresh
 * - Shows success/error feedback messages
 *
 * @async
 * @returns {Promise&lt;void>}
 *
 * @example
 * // User clicks "Buy Fuel" button
 * buyMaxFuel();
 * // Shows dialog: "Purchase 2,500t fuel for $1,000,000?"
 */
export async function buyMaxFuel() {
  // Check if capacity values are loaded from server
  if (maxFuel === 0 || maxCO2 === 0) {
    showSideNotification(' Storage capacity not yet loaded - please wait', 'error');
    return;
  }

  // Frontend is DUMB - only use prices from Header (provided by Backend via WebSocket)
  // Backend is SMART - handles all fallback logic (last price, discounted prices, validation)

  const fuelNeeded = Math.ceil(Math.max(0, maxFuel - currentFuel));
  console.log(`[Bunker] Tank status - maxFuel: ${maxFuel}t, currentFuel: ${currentFuel}t, fuelNeeded: ${fuelNeeded}t`);

  if (fuelNeeded === 0) {
    showSideNotification(' Fuel tank is already full!', 'info');
    return;
  }

  // Get CURRENT cash from cache (not stale module variable)
  const actualCash = window.updateDataCache?.bunker?.cash || currentCash;

  // Get current price from header display (provided by Backend via WebSocket)
  // Backend handles: TimeSlot fallback, discounted prices, validation
  const fuelPriceDisplay = document.getElementById('fuelPriceDisplay');
  let displayedPrice = 0;
  let hasDiscount = false;
  let discountPercentage = 0;

  if (fuelPriceDisplay &amp;&amp; fuelPriceDisplay.textContent) {
    // Parse "$576/t -20%" format
    const text = fuelPriceDisplay.textContent;
    const priceStart = text.indexOf('$') + 1;
    const priceEnd = text.indexOf('/t');
    if (priceStart > 0 &amp;&amp; priceEnd > priceStart) {
      displayedPrice = parseInt(text.substring(priceStart, priceEnd));
      const discountStart = text.indexOf('-');
      const discountEnd = text.indexOf('%');
      if (discountStart > -1 &amp;&amp; discountEnd > discountStart) {
        hasDiscount = true;
        discountPercentage = parseInt(text.substring(discountStart + 1, discountEnd));
      }
    }
  }

  // Validation: Price MUST be available from Backend
  if (displayedPrice === 0) {
    console.error('[Purchase Fuel] Price not available from Header - Backend has not sent prices yet');
    showSideNotification(' Price data not yet loaded - please wait for Backend', 'error');
    return;
  }

  const eventDiscount = hasDiscount ? { percentage: discountPercentage, type: 'fuel' } : null;

  // Determine price color class (same logic as header)
  let priceColorClass = '';
  if (displayedPrice >= 800) {
    priceColorClass = 'fuel-red';
  } else if (displayedPrice >= 600) {
    priceColorClass = 'fuel-orange';
  } else if (displayedPrice >= 400) {
    priceColorClass = 'fuel-blue';
  } else if (displayedPrice >= 1) {
    priceColorClass = 'fuel-green';
  }

  if (window.DEBUG_MODE) {
    console.log(`[Bunker] buyMaxFuel - actualCash: $${actualCash}, currentCash (var): $${currentCash}, displayedPrice: $${displayedPrice}/t (base: $${fuelPrice}/t), hasDiscount: ${hasDiscount}, priceColor: ${priceColorClass}`);
  }

  // Calculate how much we can afford
  const maxAffordable = Math.floor(actualCash / displayedPrice);
  const amountToBuy = Math.min(fuelNeeded, maxAffordable);

  if (window.DEBUG_MODE) {
    console.log(`[Bunker] Purchase calculation - fuelNeeded: ${fuelNeeded}t, maxAffordable: ${maxAffordable}t, amountToBuy: ${amountToBuy}t`);
  }

  if (amountToBuy === 0) {
    showSideNotification(' Insufficient funds to purchase fuel', 'error');
    return;
  }

  // Calculate total cost using ACTUAL price (with event discount)
  const totalCost = Math.round(amountToBuy * displayedPrice);
  const isPartialFill = amountToBuy &lt; fuelNeeded;

  const confirmed = await showConfirmDialog({
    title: ' Purchase Fuel',
    message: isPartialFill
      ? `Insufficient funds to fill tank completely. Purchase ${formatNumber(amountToBuy)}t instead?`
      : 'Do you want to purchase fuel to fill your tank?',
    confirmText: 'Buy Fuel',
    details: [
      { label: 'Amount', value: `${formatNumber(amountToBuy)}t${isPartialFill ? ` (of ${formatNumber(fuelNeeded)}t needed)` : ''}` },
      { label: hasDiscount ? `Price (incl -${eventDiscount.percentage}%)` : 'Price', value: `$${formatNumber(displayedPrice)}/t`, className: priceColorClass },
      { label: 'Total Cost', value: `$${formatNumber(totalCost)}` },
      { label: 'Cash after', value: `$${formatNumber(Math.round(actualCash - totalCost))}` }
    ]
  });

  if (!confirmed) {
    return;
  }

  try {
    if (window.DEBUG_MODE) {
      console.log(`[Fuel Purchase] SENDING TO API - amountToBuy: ${amountToBuy}t, Math.round(amountToBuy): ${Math.round(amountToBuy)}t, totalCost: $${totalCost}, actualCash: $${actualCash}, displayedPrice: $${displayedPrice}/t`);
    }

    const data = await apiPurchaseFuel(amountToBuy);

    // Backend broadcasts notification to ALL clients via WebSocket
    // No need to show notification here - all clients will receive it

    // Still update bunker status locally for immediate feedback
    if (window.debouncedUpdateBunkerStatus) {
      window.debouncedUpdateBunkerStatus(500);
    }
  } catch (error) {
    // Show actual error message - don't hide failures!
    console.error('[Fuel Purchase] Error:', error);
    if (window.DEBUG_MODE) {
      console.error('[Fuel Purchase] Error details - amountToBuy:', amountToBuy, 'totalCost:', totalCost, 'actualCash:', actualCash, 'displayedPrice:', displayedPrice);
    }
    showSideNotification(` Purchase failed: ${error.message}`, 'error');
  }
}

/**
 * Initiates purchase of CO2 quota to fill storage to maximum capacity.
 * Calculates amount needed, shows confirmation dialog with cost breakdown, and processes purchase.
 *
 * Purchase Flow:
 * 1. Calculate CO2 needed (maxCO2 - currentCO2)
 * 2. Check if already full (early exit if needed = 0)
 * 3. Calculate total cost (needed  current price)
 * 4. Show confirmation dialog with purchase details
 * 5. Process API purchase if confirmed
 * 6. Trigger bunker status refresh after successful purchase
 *
 * Side Effects:
 * - Shows confirmation dialog (blocks until user responds)
 * - Makes API call to purchase CO2 quota
 * - Updates UI via debounced bunker status refresh
 * - Shows success/error feedback messages
 *
 * @async
 * @returns {Promise&lt;void>}
 *
 * @example
 * // User clicks "Buy CO2" button
 * buyMaxCO2();
 * // Shows dialog: "Purchase 25,000t CO2 for $175,000?"
 */
export async function buyMaxCO2() {
  // Fetch capacity from API if not loaded yet - NO HARDCODED VALUES!
  if (maxFuel === 0 || maxCO2 === 0) {
    try {
      await updateCapacityFromAPI();
    } catch (error) {
      showSideNotification(' Cannot purchase - failed to fetch storage capacity', 'error');
      return;
    }
  }

  // Frontend is DUMB - only use prices from Header (provided by Backend via WebSocket)
  // Backend is SMART - handles all fallback logic (last price, discounted prices, validation)

  const co2Needed = Math.ceil(Math.max(0, maxCO2 - currentCO2));

  if (co2Needed === 0) {
    showSideNotification(' CO2 storage is already full!', 'info');
    return;
  }

  // Get CURRENT cash from cache (not stale module variable)
  const actualCash = window.updateDataCache?.bunker?.cash || currentCash;

  // Get current price from header display (provided by Backend via WebSocket)
  // Backend handles: TimeSlot fallback, discounted prices, validation
  const co2PriceDisplay = document.getElementById('co2PriceDisplay');
  let displayedPrice = 0;
  let hasDiscount = false;
  let discountPercentage = 0;

  if (co2PriceDisplay &amp;&amp; co2PriceDisplay.textContent) {
    // Parse "$24/t -20%" format
    const text = co2PriceDisplay.textContent;
    const priceStart = text.indexOf('$') + 1;
    const priceEnd = text.indexOf('/t');
    if (priceStart > 0 &amp;&amp; priceEnd > priceStart) {
      displayedPrice = parseInt(text.substring(priceStart, priceEnd));
      const discountStart = text.indexOf('-');
      const discountEnd = text.indexOf('%');
      if (discountStart > -1 &amp;&amp; discountEnd > discountStart) {
        hasDiscount = true;
        discountPercentage = parseInt(text.substring(discountStart + 1, discountEnd));
      }
    }
  }

  // Validation: Price MUST be available from Backend
  if (displayedPrice === 0) {
    console.error('[Purchase CO2] Price not available from Header - Backend has not sent prices yet');
    showSideNotification(' Price data not yet loaded - please wait for Backend', 'error');
    return;
  }

  const eventDiscount = hasDiscount ? { percentage: discountPercentage, type: 'co2' } : null;

  // Determine price color class (same logic as header)
  let priceColorClass = '';
  if (displayedPrice >= 20) {
    priceColorClass = 'co2-red';
  } else if (displayedPrice >= 15) {
    priceColorClass = 'co2-orange';
  } else if (displayedPrice >= 10) {
    priceColorClass = 'co2-blue';
  } else if (displayedPrice >= 1) {
    priceColorClass = 'co2-green';
  }

  // Calculate how much we can afford
  const maxAffordable = Math.floor(actualCash / displayedPrice);
  const amountToBuy = Math.min(co2Needed, maxAffordable);

  if (window.DEBUG_MODE) {
    console.log(`[Bunker] buyMaxCO2 - actualCash: $${actualCash}, maxAffordable: ${maxAffordable}t, amountToBuy: ${amountToBuy}t`);
  }

  if (amountToBuy === 0) {
    showSideNotification(' Insufficient funds to purchase CO2', 'error');
    return;
  }

  // Calculate total cost using ACTUAL price (with event discount)
  const totalCost = Math.round(amountToBuy * displayedPrice);
  const isPartialFill = amountToBuy &lt; co2Needed;

  const confirmed = await showConfirmDialog({
    title: ' Purchase CO2',
    message: isPartialFill
      ? `Insufficient funds to fill storage completely. Purchase ${formatNumber(amountToBuy)}t instead?`
      : 'Do you want to purchase CO2 to fill your storage?',
    confirmText: 'Buy CO2',
    details: [
      { label: 'Amount', value: `${formatNumber(amountToBuy)}t${isPartialFill ? ` (of ${formatNumber(co2Needed)}t needed)` : ''}` },
      { label: hasDiscount ? `Price (incl -${eventDiscount.percentage}%)` : 'Price', value: `$${formatNumber(displayedPrice)}/t`, className: priceColorClass },
      { label: 'Total Cost', value: `$${formatNumber(totalCost)}` },
      { label: 'Cash after', value: `$${formatNumber(Math.round(actualCash - totalCost))}` }
    ]
  });

  if (!confirmed) {
    return;
  }

  try {
    if (window.DEBUG_MODE) {
      console.log(`[CO2 Purchase] SENDING TO API - amountToBuy: ${amountToBuy}t, Math.round(amountToBuy): ${Math.round(amountToBuy)}t, totalCost: $${totalCost}, actualCash: $${actualCash}, displayedPrice: $${displayedPrice}/t`);
    }

    const data = await apiPurchaseCO2(amountToBuy);

    // Backend broadcasts notification to ALL clients via WebSocket
    // No need to show notification here - all clients will receive it

    // Still update bunker status locally for immediate feedback
    if (window.debouncedUpdateBunkerStatus) {
      window.debouncedUpdateBunkerStatus(500);
    }
  } catch (error) {
    // Show actual error message - don't hide failures!
    console.error('[CO2 Purchase] Error:', error);
    if (window.DEBUG_MODE) {
      console.error('[CO2 Purchase] Error details - amountToBuy:', amountToBuy, 'totalCost:', totalCost, 'actualCash:', actualCash, 'displayedPrice:', displayedPrice);
    }
    showSideNotification(` Purchase failed: ${error.message}`, 'error');
  }
}

/**
 * Returns a snapshot of the current bunker inventory and pricing state.
 * Used by other modules to access bunker data without direct variable access.
 *
 * This function provides read-only access to critical bunker management data,
 * allowing other modules (like vessel-management) to check affordability and
 * inventory levels before performing operations.
 *
 * @returns {Object} Current bunker state object
 * @returns {number} return.currentFuel - Current fuel inventory in tons
 * @returns {number} return.currentCO2 - Current CO2 quota in tons (can be negative)
 * @returns {number} return.currentCash - Current cash balance in dollars
 * @returns {number} return.fuelPrice - Current fuel price per ton in dollars
 * @returns {number} return.co2Price - Current CO2 price per ton in dollars
 * @returns {number} return.maxFuel - Maximum fuel capacity in tons
 * @returns {number} return.maxCO2 - Maximum CO2 capacity in tons
 *
 * @example
 * const bunkerState = getCurrentBunkerState();
 * if (bunkerState.currentCash >= purchaseCost) {
 *   // Proceed with purchase
 * }
 */
export function getCurrentBunkerState() {
  return {
    currentFuel,
    currentCO2,
    currentCash,
    fuelPrice,
    co2Price,
    maxFuel,
    maxCO2
  };
}

/**
 * Updates the current cash balance and refreshes the UI display.
 * Used by other modules to update cash after purchases or vessel operations.
 *
 * This function provides a centralized way to update cash display without
 * directly accessing module-level variables, maintaining encapsulation.
 *
 * Side Effects:
 * - Updates module-level currentCash variable
 * - Updates DOM element with formatted cash value
 *
 * @param {number} newCash - New cash balance in dollars
 *
 * @example
 * // After purchasing a vessel for $5,000,000
 * const currentState = getCurrentBunkerState();
 * updateCurrentCash(currentState.currentCash - 5000000);
 */
export function updateCurrentCash(newCash) {
  currentCash = newCash;
  document.getElementById('cashDisplay').textContent = `$${formatNumber(currentCash)}`;
}

/**
 * Updates the current fuel inventory and refreshes the UI display.
 * Used by other modules to update fuel after vessel departures or refueling.
 *
 * Side Effects:
 * - Updates module-level currentFuel variable
 * - Updates DOM element with formatted fuel value showing current/max
 *
 * @param {number} newFuel - New fuel inventory in tons
 *
 * @example
 * // After vessels depart and use 150 tons of fuel
 * const currentState = getCurrentBunkerState();
 * updateCurrentFuel(currentState.currentFuel - 150);
 */
export function updateCurrentFuel(newFuel) {
  currentFuel = newFuel;
  document.getElementById('fuelDisplay').innerHTML = `${formatNumber(Math.floor(currentFuel))} &lt;b>t&lt;/b> &lt;b>/&lt;/b> ${formatNumber(Math.floor(maxFuel))} &lt;b>t&lt;/b>`;
}

/**
 * Updates the current CO2 quota inventory and refreshes the UI display.
 * Handles negative values (quota overage) with special formatting.
 *
 * Side Effects:
 * - Updates module-level currentCO2 variable
 * - Updates DOM element with formatted CO2 value showing current/max
 * - Displays negative sign prefix when quota is exceeded
 *
 * @param {number} newCO2 - New CO2 quota in tons (can be negative)
 *
 * @example
 * // After vessels depart and emit 300 tons of CO2
 * const currentState = getCurrentBunkerState();
 * updateCurrentCO2(currentState.currentCO2 - 300);
 * // Display might show: "-50 t / 55,000 t" if player exceeded quota
 */
export function updateCurrentCO2(newCO2) {
  currentCO2 = newCO2;
  if (currentCO2 &lt; 0) {
    document.getElementById('co2Display').innerHTML = `-${formatNumber(Math.floor(Math.abs(currentCO2)))} &lt;b>t&lt;/b> &lt;b>/&lt;/b> ${formatNumber(Math.floor(maxCO2))} &lt;b>t&lt;/b>`;
  } else {
    document.getElementById('co2Display').innerHTML = `${formatNumber(Math.floor(currentCO2))} &lt;b>t&lt;/b> &lt;b>/&lt;/b> ${formatNumber(Math.floor(maxCO2))} &lt;b>t&lt;/b>`;
  }
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation Version: 0.0.7 - ShippingManager CoPilot
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
